



2. 使用以下命令将C代码转换成位流文件格式，先转成.ll文件，再将.ll文件 转成.bc文件:
$ clang -emit-llvm -S test1.c -o test1.ll
$ clang -emit-llvm -S test2.c -o test2.ll
$ llvm-as test1.ll -o test1.bc
$ llvm-as test2.ll -o test2.bc
3. 我们得到了test1.bc和test2.bc，而test2.bc引用了test1.bc文件中的func语法。 3. 通过如下方式使用llvm-link命令链接两个LLVM bitcode文件:
  $ llvm-link test1.bc test2.bc –o output.bc
4. 我们给llvm-link工具提供了多个bitcode文件，并链接得到单个bitcode输出文 件——output.bc。我们将在下一节“执行LLVM bitcode”运行这个bitcode文件。



llvm-linkM工具的功能和传统的链接器一致:如果一个函数或者变量在一个 文件中被引用，却在另一个文件中定义，那么链接器就会解析这个文件中引用 的符号。但和传统的链接器不同，llvm-link不会链接Object文件生成一个二进制 文件，它只链接bitcode文件。
在前面的场景中我们链接test1.bc和test2.bc文件生成output.bc文件，而它的 引用已经被解析并链接了。

- 在链接bitcode文件之后，我们可以传递-S参数给llvm-link工具来输出IR 文件。

```sh
ubuntu@satisfying-fowl:~$ cat test1.bc
BC??5b
      0$JY?fM??O
                Q?L!
                    ?
                     !?#?A?I29??
                                ?b?
                                   EB?
                                      Bd2K
22?Hp?!#D??A?d? CF? ?22?*(*?1|?\? ??? 
                                      2" d??!???!ㄡ?L??
                                                       ?dLs`P?2@Q?&?????p	( 
֠?ڠ?0?p`?y(???y(?6??w0zhs`?z?!?a?I?&|?;?;??6??qhvHw?|h?sp?z?`?s(zhs(?p??z??r?`    ?qxy??rz`?|hyx?zpr(rhrH{Hr(?6??x?zhs??6h?p?t?!?a? ?!?!āʡ
??????? wz0r?s mrpq?s z0r?? w z`t?v@m?v@z`t??p?q x??zv?s z`t??r?!
                                                                 yL?4վ0????$??2L??	&G?CB	?????f=?C8?ÌB?yxs?q
                                                                                                                   ???3
                                                                                                                       B??Ρf0=?C8??=?C=?=?x?tpyH?ppzpvx?p ????0n0???P3??!?!?af0?;??;?C9?<??<?;??v`{h7h?rh7??p??p`v(v?vx?w???q?r??y??,???????0bȡ?̡??a?!ā?a֐C9?C9?C9?C9??8?C8?;??/??<??;?;??
                                                                                                                            ?i?pX?rp?thx`?t?t???S??P??@? ?P3 (???A?!܁?????fQ8?C:??;?P$v`{h7`?wxx?QL???P3j?a?!??~??!?aT??8??;?C=?C9??<?C;??;?Ì?
?y??w?z(r??\????P?0#??A?????fH;??=???8?C9??<??9??;?<?H?v`?qX????`??? ?0? ?Pn?0?0?????P?0C??!???a?aF???8?;??/?C:?C:?C:?C:?C>y "rH C?
                                                                                                                                   	r2H #?????D?(d<12B??!?(l?wchar_sizeclang version 10.0.0-4ubuntu1 @03
                                               C@2???????\??????\?????F	?T????\?????F	
?

?A???!?!??4?`?P? ?@? ?P???<??;?;?=??<?C8??a 
                                            A,?"3?°
                                                   @?
                                                    04`lq 2"??e
                                                               ??LXXp
p????$]

       ?dfunc10.0.0x86_64-pc-linux-gnutest1.cubuntu@satisfying-fowl:~$ 
```



```sh

       ?dfunc10.0.0x86_64-pc-linux-gnutest1.cubuntu@satisfying-fowl:~$ cat test2.bc
BC??5b
      0$JY?fM??O
                Q?L!

                    !?#?A?I29??
                               ?b?EB?
                                     B?2K
2B?Hp?!#D??A?d? CF? ?2B?*(*?1|?\? ??? 2" d?"??"ㄡ?L??
                                                     ??L<sH:??`??0CFP?Aʁ??9PQ&?????p	( 
֠?ڠ?0?p`?y(???y(?6??w0zhs`?z?!?a?ؠ.??????8??<?C9?=?C>??<?C=?9?9?9??=?9?CC<?=??9?CC8?:??0??????????m0???0?9?;?C9?9?C8?C9?<?C:?=??<????P?0m?P??Pm`???@?9?;?C9?;?C?;??<??9?CC8?:??0???m??????m??@??C8??<?@??;??<??9?C9?CC9??;?C<?A;?=?`???P???? ???pm??@??C8??<?@?=??8?C?<?=??8??;?CC=??9??<??<??>??A? ?P??????A=??<?C9?CC9?=ԃ<??<k0??l??? l?????k0?Pl??0? l???w????Pm`?????9?;?C9D=?C9??<??9?C;?C8?`???PI?`B &|?;?;??6??qhvHw?|h?sp?z?`
??????? wz0r?s mrpq?s z0r?? w z`t?v@m?v@z`t??p?q x??zv?s z`t??r??@??	4B?i?}a??P$@@C*?`H?
??@     2?                                                                                 ?#@? ?
          L??	&G?C
m????,??YAS??????f=?C8?ÌB?yxs?q
                               ???3
                                   B??Ρf0=?C8??=?C=?=?x?tpyH?ppzpvx?p ????0n0???P3??!?!?af0?;??;?C9?<??<?;??v`{h7h?rh7??p??p`v(v?vx?w???q?r??y??,???????0bȡ?̡??a?!ā?a֐C9?C9?C9?C9??8?C8?;??/??<??;?;??
                                        ?i?pX?rp?thx`?t?t???S??P??@? ?P3 (???A?!܁?????fQ8?C:??;?P$v`{h7`?wxx?QL???P3j?a?!??~??!?aT??8??;?C=?C9??<?C;??;?Ì?
?y??w?z(r??\????P?0#??A?????fH;??=???8?C9??<??9??;?<?H?v`?qX????`??? ?0? ?Pn?0?0?????P?0C??!???a?aF???8?;??/?C:?C:?C:?C:?C>y "rH C?
                                                                                                                                   	r2H #?????D?(d<12B??!?(l?wchar_sizeclang version 10.0.0-4ubuntu1 C1?03
                                                 C@2???????\??????\?????F	?T????\?????F	
?

?A???!?!??4?`?P? ?@? ?P???<??;?;?=??<?C8??a A,4#?@>@8??8	3?P??L?0?0l?
?!f?A?36q 2"??e                                                             1?1(?	?
               1?xLXX?+???????$

                               ???$2????]
                                         ?x.strmainfuncprintf10.0.0x86_64-pc-linux-gnutest2.c.L.strubuntu@satisfying-fowl:~$ 
```



```sh
ubuntu@satisfying-fowl:~$ cat output.bc 
BC??5b
      0$JY?fM??O
                Q?L!
                    ?
                     !?#?A?I29??
                                ?b?EB?
                                      B?2K
2B?Hp?!#D??A?d? CF? ?2B?*(*?1|?\? ??? 2" d?"??"ㄡ?L??
                                                     ??L<sH:?a??CFP?Aʁ??9PQ&?????p	( 
֠?ڠ?0?p`?y(???y(?6??w0zhs`?z?!?a?ؠ.??????8??<?C9?=?C>??<?C=?9?9?9??=?9?CC<?=??9?CC8?:??0??????????m0???0?9?;?C9?9?C8?C9?<?C:?=??<????P?0m?P??Pm`???@?9?;?C9?;?C?;??<??9?CC8?:??0???m??????m??@??C8??<?@??;??<??9?C9?CC9??;?C<?A;?=?`???P???? ???pm??@??C8??<?@?=??8?C?<?=??8??;?CC=??9??<??<??>??A? ?P??????A=??<?C9?CC9?=ԃ<??<k0??l??? l?????k0?Pl??0? l???w????Pm`?????9?;?C9D=?C9??<??9?C;?C8?`???PI?`B &|?;?;??6??qhvHw?|h?sp?z?`
??????? wz0r?s mrpq?s z0r?? w z`t?v@m?v@z`t??p?q x??zv?s z`t??r??@??	4B??&l???b???@C?
                                                                                        ? ? ?!B0?b?$??	2?
                                                                                                          L??	&G?C
m????,??YAS??????f=?C8?ÌB?yxs?q
                               ???3
                                   B??Ρf0=?C8??=?C=?=?x?tpyH?ppzpvx?p ????0n0???P3??!?!?af0?;??;?C9?<??<?;??v`{h7h?rh7??p??p`v(v?vx?w???q?r??y??,???????0bȡ?̡??a?!ā?a֐C9?C9?C9?C9??8?C8?;??/??<??;?;??
                                        ?i?pX?rp?thx`?t?t???S??P??@? ?P3 (???A?!܁?????fQ8?C:??;?P$v`{h7`?wxx?QL???P3j?a?!??~??!?aT??8??;?C=?C9??<?C;??;?Ì?
?y??w?z(r??\????P?0#??A?????fH;??=???8?C9??<??9??;?<?H?v`?qX????`??? ?0? ?Pn?0?0?????P?0C??!???a?aF???8?;??/?C:?C:?C:?C:?C>y "rH C?
                                                                                                                                   	r2H #?????D?(d<12B??!?(l?clang version 10.0.0-4ubuntu1 wchar_sizeC1?03?
                                                  ? 2??T????\?????"#66?6??7?:?23????Q??

?A???!?!??4?`?P? ?@? ?P???<??;?;?=??<?C8??a 
                                            A,4E3?P?°
                                                     @?

                                                       6 ?`h??a A,4#?@>@8??8	3?P??L?0?0l?
?!f?A?36q 2"??(?Oe                                                                          1?1(?	?
                  1?xLXX?+	????????$

                                         ???$4????]
                                                   ?z.strfuncmainprintf10.0.0x86_64-pc-linux-gnullvm-link.L.strubuntu@satisfying-fowl:~$ 
```

